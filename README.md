# VMD-Lifting

official: https://github.com/DenisTome/Lifting-from-the-Deep-release

# wayne9311211/VMD-Lifting

forked from: https://github.com/errno-mmd/VMD-Lifting

# Intro

Convert video to vmd file.

I installed, debug, successful run these files in only 3 hours. It is very good.

# Download Model by Yourself

https://github.com/wayne931121/VMD-Lifting/tree/master/data/saved_sessions

# MY ENV

https://github.com/wayne931121/VMD-Lifting/blob/master/env.yml

## Key Points

- python and pip version (or you may install or build package failed)
- tensorflow and some other relation packages version
- matplotlib version
- numpy version

# MY DEVICE INFO

 - Windows 11
 - Miniforge Conda
 - CUDA 12.1 device with cudnn (installed and setted up env path)
 - NVIDIA GeForce RTX 4050 (6GB, installed driver)

# Example
simple test:
```cmd
python vmdlifting.py your_test.jpg test_output.vmd
```
simple test with default image:
```cmd
python vmdlifting.py ..\data\images\test_image.png test_if_there_is_a_bug.vmd
```
convert video to vmd file:
```cmd
python vmdlifting.py 3.mp4 3.vmd
```
Example:
<img width="1920" height="1080" alt="image" src="https://github.com/user-attachments/assets/3f46123b-acea-423b-ad5c-208d4a42571c" />

# Result

Model: miHoYo/神帝宇

Generated by blender, ffmpeg, mmd tools, VMD-Lifting

ffmpeg command: https://github.com/wayne931121/VMD-Lifting/blob/master/ffmpeg_smooth_video.md

https://github.com/user-attachments/assets/3a67b894-773c-46d0-8b00-02aee696c856

# Notice

## If you use cpu, that's good.

## If you use GPU, 

### 1. set the memoey limit here:

https://github.com/wayne931121/VMD-Lifting/blob/master/packages/lifting/_pose_estimator.py#L19

### 2. check your tmp folder is all in ansi encode (all in english) (or tensorflow may give you a error)

If not, set here:

https://github.com/wayne931121/VMD-Lifting/blob/master/applications/vmdlifting.py#L43

## I turned off the smooth vmd function

See: https://github.com/wayne931121/VMD-Lifting/blob/master/applications/readme.md

# Reference
https://www.tensorflow.org/guide/migrate#a_note_on_slim_contriblayers

https://stackoverflow.com/questions/56561734/runtimeerror-tf-placeholder-is-not-compatible-with-eager-execution

https://stackoverflow.com/questions/10475198/retrieving-the-current-frame-number-in-opencv

https://stackoverflow.com/questions/2435062/what-happened-to-the-tmp-environment-variable

https://stackoverflow.com/questions/36927607/how-can-i-solve-ran-out-of-gpu-memory-in-tensorflow

# Also See

https://stackoverflow.com/questions/78266102/opencv-throws-error-215assertion-failed/79790464#79790464

# Citation

the text copied from 

https://github.com/DenisTome/Lifting-from-the-Deep-release/blob/master/README.md#citation

	@InProceedings{Tome_2017_CVPR,
	author = {Tome, Denis and Russell, Chris and Agapito, Lourdes},
	title = {Lifting From the Deep: Convolutional 3D Pose Estimation From a Single Image},
	booktitle = {The IEEE Conference on Computer Vision and Pattern Recognition (CVPR)},
	month = {July},
	year = {2017}
	}
